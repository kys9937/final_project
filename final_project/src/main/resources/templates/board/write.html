<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>write</title>
<!-- <link href="/css/style.css" rel="stylesheet"> -->
<link rel="stylesheet" href="/css/text_area.css">
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
</head>
<body class="write">
	<div id="wrap">
		<!-- <th:block th:replace="~{layout/header::header(${session.loginUser})}"></th:block> -->
		<form id="boardForm" method="post" name="boardForm" action="/board/write_two" enctype="multipart/form-data">
			<input type="hidden" th:value="${cri.pagenum}" name="pagenum">
			<input type="hidden" th:value="${cri.amount}" name="amount">
			<input type="hidden" th:value="${cri.type}" name="type">
			<input type="hidden" th:value="${cri.keyword}" name="keyword">
			<table border="1">
				<tr>
					<th>제목</th>
					<td>
						<input type="text" name="boardtitle" maxlength="50" placeholder="제목을 입력하세요">
					</td>
				</tr>
				<tr>
					<th>작성자</th>
					<td>
						<input type="text" name="userid" maxlength="50" th:value="${session.loginUser}" readonly>
					</td>
				</tr>
				<tr>
					<th>내용</th>
					<td id="text_area">
						<div id="toolbar-container">
				            <!-- 폰트와 사이즈 선택 -->
				            <select class="ql-font"></select>
				            <select class="ql-size"></select>
				            <!-- 텍스트 포맷 -->
				            <button class="ql-bold"></button>
				            <button class="ql-italic"></button>
				            <button class="ql-underline"></button>
				            <button class="ql-strike"></button>
				            <!-- 텍스트 색상 및 배경색 -->
				            <select class="ql-color"></select>
				            <select class="ql-background"></select>
				            <!-- 위첨자, 아래첨자 -->
				            <button class="ql-script" value="sub"></button>
				            <button class="ql-script" value="super"></button>
				            <!-- 헤더 -->
				            <button class="ql-header" value="1"></button>
				            <button class="ql-header" value="2"></button>
				            <!-- 블록 인용, 코드 블록 -->
				            <button class="ql-blockquote"></button>
				            <button class="ql-code-block"></button>
				            <!-- 순서 있는 목록, 순서 없는 목록 -->
				            <button class="ql-list" value="ordered"></button>
				            <button class="ql-list" value="bullet"></button>
				            <!-- 들여쓰기, 내어쓰기 -->
				            <button class="ql-indent" value="-1"></button>
				            <button class="ql-indent" value="+1"></button>
				            <!-- 텍스트 방향 -->
				            <button class="ql-direction" value="rtl"></button>
				            <!-- 정렬 -->
				            <select class="ql-align"></select>
				            <!-- 링크, 이미지, 비디오 -->
				            <button class="ql-link"></button>
				            <button class="ql-image"></button>
				            <button class="ql-video"></button>
				            <!-- 포맷 초기화 -->
				            <button class="ql-clean"></button>
				        </div>
				        <!-- 에디터 컨테이너 생성 -->
				        <div id="editor-container"></div>
				        <!-- 숨겨진 입력 필드로 컨텐츠 제출 -->
				        <input type="hidden" name="content" id="hidden-content">
					</td>
				</tr>
			</table>
		</form>
		<table class="btn_area">
			<tbody>
				<tr>
					<td>
						<a class="btn" href="javascript:sendit();">등록</a>
						<!-- <button class="btn" onclick="sendHTML()">Send HTML</button> -->
						<a class="btn" th:href="${'/board/list' + cri.listLink}">목록</a>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</body>
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script src="https://cdn.jsdelivr.net/npm/quill-image-resize-module@3.0.0/image-resize.min.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="/js/text_area.js"></script>
<script>

	function sendit(){
		const boardForm = document.boardForm;
		
		var btnAreaHTML = document.querySelector('#editor-container').outerHTML;
        fetch('/board/write_two', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ html: btnAreaHTML })
        })
        .then(response => response.text())
        .then(data => {
            console.log('서버 응답:', data);
        })
        .catch(error => {
            console.error('서버 요청 실패:', '실패다.');
        });
		//유효성 검사
		//boardForm.submit();
	}

    
    function sendHTML() {
        var btnAreaHTML = document.querySelector('#editor').outerHTML;

        fetch('/board/write_two', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ html: btnAreaHTML })
        })
        .then(response => response.text())
        .then(data => {
            console.log('서버 응답:', data);
        })
        .catch(error => {
            console.error('서버 요청 실패:', error);
        });
    }
</script>
</html>




